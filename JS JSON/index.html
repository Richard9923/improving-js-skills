<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h2>Creating an object from a JSON string</h2>
    <p id="demo"></p>
    <p id="demo2"></p>
    <script>
      const person = { name: "John", age: 31, city: "New York" };
      console.log(`Objecto: ${person}.`);
      const myJSON = JSON.stringify(person);
      console.log(`Objeto virou string: ${myJSON}`);

      console.log(person.name);
      console.log(person["name"]);
      person.name = "Gilbert";
      console.log(person.name);
      console.log(person["name"]);
      person["name"] = "John";
      console.log(person.name);
      console.log(person["name"]);

      //   const txt = '{"name":"John","age":30, "city":"New York"}';
      //   const obj = JSON.parse(txt);
      //   document.getElementById("demo").innerText = obj.name + "," + obj.age;

      //   const xml = new XMLHttpRequest();
      //   xml.onload = function () {
      //     const obj = JSON.parse(this.responseText);
      //     document.getElementById("demo2").innerHTML = obj.name;
      //   };
      //   xml.open("GET", "json_demo_txt");
      //   xml.send();
      const xmlhttp = new XMLHttpRequest();
      xmlhttp.onload = function () {
        const myObj = JSON.parse(this.responseText);
        document.getElementById("demo").innerHTML = myObj.name;
      };
      xmlhttp.open("GET", "demo_file.php");
      xmlhttp.send();

      const dbParam = JSON.stringify({ table: "customers", limit: 20 });
      const xmlhttp = new XMLHttpRequest();
      xmlhttp.onload = function () {
        myObj = JSON.parse(this.responseText);
        let text = "<table border='1'>";
        for (let x in myObj) {
          text += "<tr><td>" + myObj[x].name + "</td></tr>";
        }
        text += "</table>";
        document.getElementById("demo").innerHTML = text;
      };
      xmlhttp.open("POST", "json_demo_html_table.php");
      xmlhttp.setRequestHeader(
        "Content-type",
        "application/x-www-form-urlencoded"
      );
      xmlhttp.send("x=" + dbParam);
    </script>
  </body>
</html>
